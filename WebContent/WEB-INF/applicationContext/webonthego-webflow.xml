<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/webflow-config" xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans 
  http://www.springframework.org/schema/beans/spring-beans.xsd
  http://www.springframework.org/schema/webflow-config  
  http://www.springframework.org/schema/webflow-config/spring-webflow-config-2.3.xsd">

  <beans:bean class="org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter" />

  <beans:bean id="flowController" class="org.springframework.webflow.mvc.servlet.FlowController">
    <beans:property name="flowExecutor" ref="flowExecutor" />
  </beans:bean>

  <beans:bean id="viewFactoryCreator" class="org.springframework.webflow.mvc.builder.MvcViewFactoryCreator">
    <beans:property name="viewResolvers">
      <beans:list>
        <beans:ref bean="viewResolver" />
      </beans:list>
    </beans:property>
  </beans:bean>

  <beans:bean id="flowUrlMappings" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <beans:property name="mappings">
      <beans:value>
        /register=flowController
        /activate=flowController
      </beans:value>
    </beans:property>
    <beans:property name="alwaysUseFullPath" value="true" />
  </beans:bean>

  <flow-builder-services id="flowBuilderServices" view-factory-creator="viewFactoryCreator" />

  <flow-executor id="flowExecutor" flow-registry="flowRegistry" />

  <flow-registry id="flowRegistry" flow-builder-services="flowBuilderServices">
    <flow-location path="/WEB-INF/resources/flows/register/register.xml" />
    <flow-location path="/WEB-INF/resources/flows/activate/activate.xml" />
    <flow-location path="/WEB-INF/resources/flows/activate/requestPaymentMethod.xml" />
    <flow-location path="/WEB-INF/resources/flows/activate/choosePaymentMethod.xml" />
    <flow-location path="/WEB-INF/resources/flows/activate/chooseOrRequestPaymentMethod.xml" />
    <flow-location path="/WEB-INF/resources/flows/activate/script/activateDevice.xml" />
  </flow-registry>

</beans:beans>